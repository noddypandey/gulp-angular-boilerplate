<div ng-controller='InsuranceCompanyAddController'>
    <div class="row" ng-init="init();">
        <div class="col-md-4">
            <table class="table table-responsive table-hover">
                <tr>
                    <td>Name</td>
                    <td>City</td>
                </tr>
                <tr ng-repeat="ins in insurances.list | city:search | cname:company">
                    <td>{{ins.name}}</td>
                    <td>{{ins.city}}</td>
                </tr>
            </table>
        </div>
        <div class="col-md-4">
            <form name="userForm" ng-submit="insurances.add(userForm.$valid)" novalidate>
                <div class="form-group" ng-class="{ 'has-error' : userForm.name.$invalid && !userForm.name.$pristine && submitted }">
                    <input required name="name" ng-minlength="2" type="text" ng-model="insurances.insurance.name" class="form-control">
                    <p ng-show="!userForm.name.$valid && (!userForm.name.$pristine || submitted)" class="help-block">You name is required.</p>
                </div>
                <div class="form-group" ng-class="{ 'has-error' : userForm.name.$invalid && !userForm.name.$pristine && submitted }">
                    <input required name="city" ng-minlength="2" type="text" ng-model="insurances.insurance.city" class="form-control">
                    <p ng-show="!userForm.city.$valid && (!userForm.city.$pristine || submitted)" class="help-block">You name is required.</p>
                </div>
                <div class="form-group">
                    <input type="submit" class="btn btn-primary">
                </div>
            </form>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <input name="search" type="text" ng-model="search" class="form-control" placeholder="Search">
            </div>
            <div class="form-group">
                <input name="company" type="text" ng-model="company" class="form-control" placeholder="Search">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <tree family="treeFamily" style="margin-left:-40px;"></tree>
        </div>
        <div class="col-md-4">
            <collection collection='tasks'></collection>
        </div>
        <div class="col-md-4">
            <button class="btn btn-primary form-control" ng-click="authenticateUser()">Login</button>
        </div>
    </div>


    <div ng-if="isAuthenticated">
        <span>Name : {{user.name}}</span>
    </div>
</div>
